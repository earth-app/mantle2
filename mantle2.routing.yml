# OpenAPI
mantle2.openapi:
  path: '/openapi'
  defaults:
    _controller: '\Drupal\mantle2\Controller\Schema\OpenAPIController::getSchema'
    _title: 'OpenAPI Schema'
  requirements:
    _access: 'TRUE'
  options:
    schema/200: ''
  methods: [GET]

# Routes
mantle2.hello:
  path: /v2/hello
  defaults:
    _controller: '\Drupal\mantle2\Controller\GeneralController::hi'
    _title: 'Hello!'
  requirements:
    _access: 'TRUE'
  options:
    description: Say hi to mantle2
    schema/200/type: text/plain
  methods: [GET]

mantle2.info:
  path: /v2/info
  defaults:
    _controller: '\Drupal\mantle2\Controller\GeneralController::getInfo'
    _title: 'Module Information'
  requirements:
    _access: 'TRUE'
  options:
    description: Retrieve information about the mantle2 Module
  methods: [GET]

## User Routes
mantle2.users:
  path: '/v2/users'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::users'
    _title: 'Retrieve User List'
  requirements:
    _access: 'TRUE'
  options:
    description: Retrieves a list of Earth App users
    schema/200: users()
    schema/400: Invalid Pagination Parameters
    query:
      limit: 25
      page: 1
      search: ''
  methods: [GET]

mantle2.users.login:
  path: '/v2/users/login'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::login'
    _title: 'User Login'
  requirements:
    _access: 'TRUE'
  options:
    description: 'Log in to your Earth App account'
    schema/200: loginResponse()
    schema/400: Invalid login credentials
    schema/401: Unauthorized
  methods: [POST]

mantle2.users.logout:
  path: '/v2/users/logout'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::logout'
    _title: 'User Logout'
  requirements:
    _access: 'TRUE'
  options:
    description: Log out of your Earth App account
    schema/200: logoutResponse()
    schema/401: Unauthorized
  methods: [POST]

mantle2.users.create:
  path: '/v2/users/create'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::createUser'
    _title: 'Create User'
  requirements:
    _access: 'TRUE'
  options:
    description: Sign up for an Earth App account
    schema/201: signupResponse()
    schema/400: Bad User Data
  methods: [POST]

mantle2.users.id.get:
  path: '/v2/users/{id}'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::getUser'
    _title: 'Retrieve User by ID'
  requirements:
    _access: 'TRUE'
    id: '\d+'
  options:
    description: Retrieves user information by their identifier
    schema/200: user()
    schema/404: User not found
    parameters:
      id:
        type: string
  methods: [GET]

mantle2.users.id.patch:
  path: '/v2/users/{id}'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::patchUser'
    _title: 'Update User by ID'
  requirements:
    _access: 'TRUE'
    id: '\d+'
  options:
    description: Updates user information by their identifier
    schema/200: user()
    schema/401: Unauthorized
    schema/403: Forbidden
    schema/404: User not found
    parameters:
      id:
        type: string
  methods: [PATCH]

mantle2.users.id.delete:
  path: '/v2/users/{id}'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::deleteUser'
    _title: 'Delete User by ID'
  requirements:
    _access: 'TRUE'
    id: '\d+'
  options:
    schema/204: User deleted successfully
    schema/401: Unauthorized
    schema/403: Forbidden
    schema/404: User not found
    parameters:
      id:
        type: string
  methods: [DELETE]

mantle2.users.id.patch_field_privacy:
  path: '/v2/users/{id}/field_privacy'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::patchFieldPrivacy'
    _title: 'Edit User Field Privacy by ID'
  requirements:
    _access: 'TRUE'
    id: '\d+'
  options:
    description: Updates user field privacy settings by their identifier
    schema/200: user()
    schema/401: Unauthorized
    schema/403: Forbidden
    schema/404: User not found
    parameters:
      id:
        type: string
  methods: [PATCH]

mantle2.users.username.get:
  path: '/v2/users/{username}'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::getUser'
    _title: 'Retrieve User by Username'
  requirements:
    _access: 'TRUE'
    username: '@\w+'
  options:
    description: Retrieves user information by their username
    schema/200: user()
    schema/404: User not found
    parameters:
      username:
        type: string
  methods: [GET]

mantle2.users.username.patch:
  path: '/v2/users/{username}'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::patchUser'
    _title: 'Update User by Username'
  requirements:
    _access: 'TRUE'
    username: '@\w+'
  options:
    description: Updates user information by their username
    schema/200: user()
    schema/401: Unauthorized
    schema/403: Forbidden
    schema/404: User not found
    parameters:
      username:
        type: string
  methods: [PATCH]

mantle2.users.username.delete:
  path: '/v2/users/{username}'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::deleteUser'
    _title: 'Delete User by Username'
  requirements:
    _access: 'TRUE'
    username: '@\w+'
  options:
    schema/204: User deleted successfully
    schema/401: Unauthorized
    schema/403: Forbidden
    schema/404: User not found
    parameters:
      username:
        type: string
  methods: [DELETE]

mantle2.users.username.patch_field_privacy:
  path: '/v2/users/{username}/field_privacy'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::patchFieldPrivacy'
    _title: 'Edit User Field Privacy by Username'
  requirements:
    _access: 'TRUE'
    username: '@\w+'
  options:
    description: Updates user field privacy settings by their username
    schema/200: user()
    schema/401: Unauthorized
    schema/403: Forbidden
    schema/404: User not found
    parameters:
      username:
        type: string
  methods: [PATCH]

mantle2.users.current.get:
  path: '/v2/users/current'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::currentGet'
    _title: 'Retrieve Current User'
  requirements:
    _access: 'TRUE'
  options:
    description: Retrieves the current user according to the session ID
    schema/200: user()
    schema/401: Unauthorized
    schema/404: User not found
  methods: [GET]

mantle2.users.current.patch:
  path: '/v2/users/current'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::currentPatch'
    _title: 'Update Current User'
  requirements:
    _access: 'TRUE'
  options:
    description: Updates the current user according to the session ID
    schema/200: user()
    schema/400: Bad Request
    schema/404: User not found
  methods: [PATCH]

mantle2.users.current.delete:
  path: '/v2/users/current'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::currentDelete'
    _title: 'Delete Current User'
  requirements:
    _access: 'TRUE'
  options:
    description: Deletes the current user according to the session ID
    schema/401: Unauthorized
    schema/204: User deleted successfully
  methods: [DELETE]

mantle2.users.current.patch_field_privacy:
  path: '/v2/users/current/field_privacy'
  defaults:
    _controller: '\Drupal\mantle2\Controller\User\UsersController::currentFieldPrivacy'
    _title: 'Edit Current User Field Privacy'
  requirements:
    _access: 'TRUE'
  options:
    description: Updates user field privacy settings according to the session ID
    schema/200: user()
    schema/401: Unauthorized
    schema/404: User not found
  methods: [PATCH]
