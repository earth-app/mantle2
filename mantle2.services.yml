services:
  # Event Subscribers
  mantle2.api_exception_subscriber:
    class: Drupal\mantle2\EventSubscriber\ApiExceptionSubscriber
    tags:
      - { name: event_subscriber }

  mantle2.rate_limit_subscriber:
    class: Drupal\mantle2\EventSubscriber\RateLimitSubscriber
    arguments: ['@keyvalue.expirable']
    tags:
      - { name: event_subscriber }

  mantle2.rate_limit_response_subscriber:
    class: Drupal\mantle2\EventSubscriber\RateLimitResponseSubscriber
    tags:
      - { name: event_subscriber }

  mantle2.cors_subscriber:
    class: Drupal\mantle2\EventSubscriber\CorsSubscriber
    tags:
      - { name: event_subscriber }

  mantle2.post_response_subscriber:
    class: Drupal\mantle2\EventSubscriber\PostResponseSubscriber
    tags:
      - { name: event_subscriber }

  # Utility Classes
  mantle2.helper:
    class: Drupal\mantle2\Service\GeneralHelper

  mantle2.helper.cloud:
    class: Drupal\mantle2\Service\CloudHelper

  mantle2.helper.user:
    class: Drupal\mantle2\Service\UsersHelper

  mantle2.helper.activities:
    class: Drupal\mantle2\Service\ActivityHelper

  mantle2.helper.events:
    class: Drupal\mantle2\Service\EventsHelper

  mantle2.helper.prompts:
    class: Drupal\mantle2\Service\PromptsHelper

  mantle2.helper.articles:
    class: Drupal\mantle2\Service\ArticlesHelper

  mantle2.helper.redis:
    class: Drupal\mantle2\Service\RedisHelper

  mantle2.helper.email_campaigns:
    class: Drupal\mantle2\Service\CampaignHelper

  # Email Verification Tempstore (deprecated - use Redis instead)
  mantle2.tempstore.email_verification:
    class: Drupal\Core\TempStore\PrivateTempStoreFactory
    arguments: ['@keyvalue.expirable', '@lock', '@current_user', '@request_stack']
    tags:
      - { name: backend_overridable }

  # Email HTML Rendering
  mantle2.parser:
    class: Drupal\mantle2\Service\HTMLFactory
